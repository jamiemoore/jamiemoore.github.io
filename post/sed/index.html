<!DOCTYPE html>
<html lang="en" itemscope itemtype="http://schema.org/WebPage">
  <head>
    

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

  <title>sed - jamie.so</title>
  <meta property="og:title" content="sed" />
  <meta name="twitter:title" content="sed" />
  <meta name="description" content="find and replace all the things">
  <meta property="og:description" content="find and replace all the things">
  <meta name="twitter:description" content="find and replace all the things">
  <meta name="author" content="jamie moore"/><script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "jamie.so",
    
    "url": "https:\/\/jamie.so\/"
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https:\/\/jamie.so\/"
  
  
  
  
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https:\/\/jamie.so\/",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https:\/\/jamie.so\/post\/sed\/",
          "name": "Sed"
        }
    }]
}
</script><script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "author": {
    "name" : "jamie moore"
  },
  "headline": "sed",
  "description" : "sed, search and replace text using regex. You have text and you want to change it\x26hellip; you need sed. Works well over multiple files when combined with find. Pre installed on most operating systems just waiting for you to use it. However using the BSD version of sed that comes with OS X can cause you pain\x26hellip; so sometimes for compatibility awk is your friend.\n",
  "inLanguage" : "en",
  "wordCount":  372 ,
  "datePublished" : "2019-09-15T11:45:40",
  "dateModified" : "2019-09-15T11:45:40",
  "image" : "https:\/\/jamie.so\/img\/avatar-icon.png",
  "keywords" : [ "linux, cli, sed" ],
  "mainEntityOfPage" : "https:\/\/jamie.so\/post\/sed\/",
  "publisher" : {
    "@type": "Organization",
    "name" : "https:\/\/jamie.so\/",
    "logo" : {
        "@type" : "ImageObject",
        "url" : "https:\/\/jamie.so\/img\/avatar-icon.png",
        "height" :  60 ,
        "width" :  60
    }
  }
}
</script>

<meta property="og:title" content="sed" />
<meta property="og:description" content="find and replace all the things">
<meta property="og:image" content="https://jamie.so/img/avatar-icon.png" />
<meta property="og:url" content="https://jamie.so/post/sed/" />
<meta property="og:type" content="website" />
<meta property="og:site_name" content="jamie.so" />

  <meta name="twitter:title" content="sed" />
  <meta name="twitter:description" content="find and replace all the things">
  <meta name="twitter:image" content="https://jamie.so/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@jbgmoore" />
  <meta name="twitter:creator" content="@jbgmoore" />
  <meta property="og:image" content="https://jamie.so/img/avatar-icon.png" />
  <meta name="twitter:image" content="https://jamie.so/img/avatar-icon.png" />
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@jbgmoore" />
  <meta name="twitter:creator" content="@jbgmoore" />
  <meta property="og:url" content="https://jamie.so/post/sed/" />
  <meta property="og:type" content="website" />
  <meta property="og:site_name" content="jamie.so" />

  <meta name="generator" content="Hugo 0.57.2" />
  <link rel="alternate" href="https://jamie.so/index.xml" type="application/rss+xml" title="jamie.so"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css" integrity="sha384-9eLZqc9ds8eNjO3TmqPeYcDj8n+Qfa4nuSiGYa6DjLNcv9BtN69ZIulL9+8CqC9Y" crossorigin="anonymous">
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.5.0/css/all.css" integrity="sha384-B4dIYHKNBt8Bc12p+WXckhzcICo0wtJAoU8YZTY5qE0Id1GSseTk6S+L3BlXeVIU" crossorigin="anonymous">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous"><link rel="stylesheet" href="https://jamie.so/css/main.css" /><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
  <link rel="stylesheet" href="https://jamie.so/css/highlight.min.css" /><link rel="stylesheet" href="https://jamie.so/css/codeblock.css" /><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.css" integrity="sha384-h/L2W9KefUClHWaty3SLE5F/qvc4djlyR4qY3NUV5HGQBBW7stbcfff1+I/vmsHh" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/default-skin/default-skin.min.css" integrity="sha384-iD0dNku6PYSIQLyfTOpB06F2KCZJAKLOThS5HRe8b3ibhdEQ6eKsFf/EeFxdOt5R" crossorigin="anonymous">


<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-357049-2', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>


  </head>
  <body>
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="https://jamie.so/">jamie.so</a>
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
        
          
            <li>
              <a title=".plan" href="/page/plan/">.plan</a>
            </li>
          
        
          
            <li>
              <a title="notes" href="/">notes</a>
            </li>
          
        
          
            <li>
              <a title="tags" href="/tags">tags</a>
            </li>
          
        
          
            <li>
              <a title="talks" href="/page/talks/">talks</a>
            </li>
          
        
          
            <li>
              <a title="resume" href="/page/resume/">resume</a>
            </li>
          
        
          
            <li>
              <a title="contact" href="/page/contact/">contact</a>
            </li>
          
        
          
            <li>
              <a title="about" href="/page/about/">about</a>
            </li>
          
        

        

        
      </ul>
    </div>

    
      <div class="avatar-container">
        <div class="avatar-img-border">
          <a title="jamie.so" href="https://jamie.so/">
            <img class="avatar-img" src="https://jamie.so/img/avatar-icon.png" alt="jamie.so" />
          </a>
        </div>
      </div>
    

  </div>
</nav>




    


<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

<div class="pswp__bg"></div>

<div class="pswp__scroll-wrap">
    
    <div class="pswp__container">
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
      <div class="pswp__item"></div>
    </div>
    
    <div class="pswp__ui pswp__ui--hidden">
    <div class="pswp__top-bar">
      
      <div class="pswp__counter"></div>
      <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
      <button class="pswp__button pswp__button--share" title="Share"></button>
      <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
      <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
      
      
      <div class="pswp__preloader">
        <div class="pswp__preloader__icn">
          <div class="pswp__preloader__cut">
            <div class="pswp__preloader__donut"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
      <div class="pswp__share-tooltip"></div>
    </div>
    <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
    </button>
    <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
    </button>
    <div class="pswp__caption">
      <div class="pswp__caption__center"></div>
    </div>
    </div>
    </div>
</div>


  
  
  






  

  <header class="header-section ">
    
    <div class="intro-header no-img">
      <div class="container">
        <div class="row">
          <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
            <div class="post-heading">
              
                <h1>sed</h1>
              
              
              
                
                  <h2 class="post-subheading">find and replace all the things</h2>
                
              
              
                <span class="post-meta">
  
  
  <i class="fas fa-calendar"></i>&nbsp;Posted on September, 2019
  
  
  
  
    &nbsp;|&nbsp;<i class="fas fa-user"></i>&nbsp;jamie moore
  
  
</span>


              
            </div>
          </div>
        </div>
      </div>
    </div>
  </header>


    
<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <article role="main" class="blog-post">
        <p><code>sed</code>, search and replace text using regex.  You have text and you want to change it&hellip; you need sed.  Works well over multiple files when combined with <code>find</code>. Pre installed on most operating systems just waiting for you to use it.  However using the BSD version of sed that comes with OS X can cause you pain&hellip; so sometimes for compatibility <code>awk</code> is your friend.</p>

<h2 id="usage">Usage</h2>

<ul>
<li><p>Dry run your sed command to standard out.</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sed <span class="s1">&#39;s/enabled = 1/enabled = 0/&#39;</span> /etc/yum/pluginconf.d/rhnplugin.conf</code></pre></div></li>

<li><p>Modify the file</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">sed -i <span class="s1">&#39;s/enabled = 1/enabled = 0/&#39;</span> /etc/yum/pluginconf.d/rhnplugin.conf</code></pre></div></li>
</ul>

<h2 id="examples">Examples</h2>

<ul>
<li><p>string replace all files in a directory combined with find</p>
<div class="highlight"><pre class="chroma"><code class="language-bash" data-lang="bash">find . -type f -exec sed <span class="s2">&#34;s/foo/bar/g&#34;</span> <span class="o">{}</span> <span class="se">\;</span>
  
find . -type f -exec sed <span class="s2">&#34;s/jira_instance_key/dss_instance_key/g&#34;</span> <span class="o">{}</span> <span class="se">\;</span></code></pre></div></li>

<li><p>Replace the first occurence of a pattern in line on every line in a file with another.</p>
<div class="highlight"><pre class="chroma">sed -i &#39;s/IPTABLES_MODULES=&#34;ip_conntrack_netbios_ns &#34;/IPTABLES_MODULES=&#34;ip_conntrack_netbios_ns ip_conntrack_ftp&#34;/&#39; /etc/sysconfig/iptables-config </pre></div></li>

<li><p>Replace the first occurrence of /bin/bash with /sbin/bash in a line that starts with <code>jmoore:/</code></p>
<div class="highlight"><pre class="chroma">sed -i &#39;/^jmoore:/s/\/bin\/bash/\/sbin\/nologin/&#39; passtest</pre></div></li>

<li><p>Replace only the first occurrence in a file (if run again will replace second occurance)</p>
<div class="highlight"><pre class="chroma">[root@host ~]# sed &#39;0,/enabled = 1/{s/enabled = 1/enabled = 0/}&#39; /etc/yum/pluginconf.d/rhnplugin.conf  
[main]
enabled = 0
gpgcheck = 1

[rhel-i386-server-5]
enabled = 1</pre></div></li>

<li><p>Replace only the first occurrence in a file (immutable)</p>
<div class="highlight"><pre class="chroma">[root@host ~]# sed &#39;0,/enabled = /{s/enabled = 1/enabled = 0/}&#39; /etc/yum/pluginconf.d/rhnplugin.conf  </pre></div></li>

<li><p>Replace the second occurence of a pattern in the output</p>
<div class="highlight"><pre class="chroma">tail -n 1 /etc/localtime | sed -e &#39;s/EST/EDT/2&#39;</pre></div></li>

<li><p>replace all occurences</p>
<div class="highlight"><pre class="chroma">tail -n 1 /etc/localtime | sed -e &#39;s/EST/EDT/g&#39;</pre></div></li>

<li><p>Remove the . at the end of the line</p>
<div class="highlight"><pre class="chroma">dig +short -x $(ifconfig eth0 | awk -F: &#39;/inet addr:/ {print $2}&#39; | awk &#39;{ print $1 }&#39;) | sed -e &#39;s/.$//g&#39;</pre></div></li>

<li><p>Change a flag in a file</p>
<div class="highlight"><pre class="chroma">grep pxe_just_once /etc/cobbler/settings
pxe_just_once: 0
  
sed -i &#39;/pxe_just_once/s/0/1/&#39; /etc/cobbler/settings
  
grep pxe_just_once /etc/cobbler/settings
pxe_just_once: 1</pre></div></li>

<li><p>Replace the word scripts in all files in the directory</p>
<div class="highlight"><pre class="chroma">sed -i &#39;s/\/scripts\//\/reposcripts\//&#39; *</pre></div></li>

<li><p>Replace &ldquo;ensure =&gt; installed&rdquo; with &ldquo;ensure =&gt; latest&rdquo; in all files in a directory</p>
<div class="highlight"><pre class="chroma">grep &#34;ensure =&gt; installed&#34; *
adjoin.pp:            ensure =&gt; installed;
init.pp:        ensure =&gt; installed,
sssd.pp:        ensure =&gt; installed,
  
sed -i &#39;s/ensure =&gt; installed/ensure =&gt; latest/&#39; *
  
  
grep &#34;ensure =&gt; installed&#34; *</pre></div></li>

<li><p>Combine with find.</p>
<div class="highlight"><pre class="chroma">find /usr/local/sbin -type f -name &#39;*nis*&#39; -exec sed &#39;s/dew./user-reg./&#39; {} +</pre></div></li>
</ul>

        
          <div class="blog-tags">
            
              <a href="https://jamie.so//tags/linux/">linux</a>&nbsp;
            
              <a href="https://jamie.so//tags/cli/">cli</a>&nbsp;
            
              <a href="https://jamie.so//tags/sed/">sed</a>&nbsp;
            
          </div>
        

        

        
          
          
          <h4 class="see-also">See also</h4>
          <ul>
          
            <li><a href="/post/chamber/">chamber</a></li>
          
            <li><a href="/post/aws-vault/">aws-vault</a></li>
          
            <li><a href="/post/aws-jq/">awscli and jq</a></li>
          
          </ul>
          
        
      </article>

      
        <ul class="pager blog-pager">
          
            <li class="previous">
              <a href="https://jamie.so/post/chamber/" data-toggle="tooltip" data-placement="top" title="chamber">&larr; Previous Post</a>
            </li>
          
          
        </ul>
      


      
        
        
      

    </div>
  </div>
</div>

    <footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links">
          
              <li>
                <a href="mailto:jbgmoore@gmail.com" title="Email me">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fas fa-envelope fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://github.com/jamiemoore" title="GitHub">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://twitter.com/jbgmoore" title="Twitter">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
              <li>
                <a href="https://linkedin.com/in/jbgmoore" title="LinkedIn">
                  <span class="fa-stack fa-lg">
                    <i class="fas fa-circle fa-stack-2x"></i>
                    <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
                  </span>
                </a>
              </li>
          
          <li>
            <a href="" title="RSS">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="credits copyright text-muted">
          
            
              <a href="jamie.so">jamie moore</a>
            
          

          &nbsp;&bull;&nbsp;&copy;
          
            2019
          

          
            &nbsp;&bull;&nbsp;
            <a href="https://jamie.so/">jamie.so</a>
          
        </p>
        
        <p class="credits theme-by text-muted">
          <a href="http://gohugo.io">Hugo v0.57.2</a> powered &nbsp;&bull;&nbsp; Theme by <a href="http://deanattali.com/beautiful-jekyll/">Beautiful Jekyll</a> adapted to <a href="https://github.com/halogenica/beautifulhugo">Beautiful Hugo</a>
          
        </p>
      </div>
    </div>
  </div>
</footer><script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.js" integrity="sha384-K3vbOmF2BtaVai+Qk37uypf7VrgBubhQreNQe9aGsz9lB63dIFiQVlJbr92dw2Lx" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/contrib/auto-render.min.js" integrity="sha384-kmZOZB5ObwgQnS/DuDg6TScgOiWWBiVt0plIRkZCmE6rDZGrEOQeHM5PcHi+nyqe" crossorigin="anonymous"></script>
<script src="https://code.jquery.com/jquery-1.12.4.min.js" integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ=" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<script src="https://jamie.so/js/main.js"></script>
<script src="https://jamie.so/js/highlight.min.js"></script>
<script> hljs.initHighlightingOnLoad(); </script>
<script> $(document).ready(function() {$("pre.chroma").css("padding","0");}); </script><script> renderMathInElement(document.body); </script><script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe.min.js" integrity="sha384-QELNnmcmU8IR9ZAykt67vGr9/rZJdHbiWi64V88fCPaOohUlHCqUD/unNN0BXSqy" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/photoswipe/4.1.2/photoswipe-ui-default.min.js" integrity="sha384-m67o7SkQ1ALzKZIFh4CiTA8tmadaujiTa9Vu+nqPSwDOqHrDmxLezTdFln8077+q" crossorigin="anonymous"></script><script src="https://jamie.so/js/load-photoswipe.js"></script>









  </body>
</html>

